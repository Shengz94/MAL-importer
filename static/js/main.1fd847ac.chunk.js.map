{"version":3,"sources":["helper/utils.js","components/ImportFromList.js","components/AnimeImportCard.js","helper/malAPI.js","components/ImportToMAL.js","components/Login.js","components/Result.js","resources/mal_logo.png","components/TopBar.js","resources/github_logo.png","components/Gateway.js","index.js"],"names":["isNull","variable","undefined","base64URLEncode","str","toString","replace","withRouter","props","useState","file","setFile","useEffect","userToken","history","push","className","type","onChange","e","preventDefault","target","files","browseFile","Button","disabled","variant","color","onClick","reader","FileReader","onload","source","result","split","animes","Map","forEach","element","charCodeAt","anime","id","uuidv4","sourceTitle","malTitle","selected","import","set","populateAnimes","readAsText","AnimeImportCard","checked","handleImportCheckBox","value","JSON","stringify","handleSelectedChange","map","title","href","rel","src","picture","alt","MAL_API_KEY","MAL_DOMAIN_V1","MAL_DOMAIN_V2","MAL_REDIRECT_URI","getUserInfo","token","fetch","headers","method","then","response","json","data","name","searchAnime","body","URLSearchParams","append","endpoint","current","node","entry","main_picture","medium","addToList","status","score","ready","setReady","animeArray","setAnimeArray","loading","setLoading","setStatus","a","requests","tempElement","Promise","allSettled","updateAnimes","tempAnimes","values","results","fillLog","populateMALTitle","length","size","height","width","idx","replaceAll","updateAnime","codeVerifier","crypto","randomBytes","codeChallenge","localStorage","setItem","window","location","code_challenge","authenticationURI","renderLog","line","indexOf","linkAr","link","textAr","text","linkText","log","Math","random","TopBar","mal_logo","user","logout","Gateway","setAnimes","setLog","setUser","getItem","setUserToken","newAnime","tempAnime","get","parse","importedSet","Set","tempLog","has","code","search","header","access_token","expireIn","expires_in","refreshToken","refresh_token","getToken","basename","process","exact","path","input","render","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1fd847ac.chunk.js","sourcesContent":["import crypto from 'crypto';\n\nfunction isNull(variable){\n    return variable === \"undefined\" || variable === \"null\" \n    || variable === \"\" || typeof variable === \"undefined\"\n    || variable === undefined || variable === null;\n}\n\nfunction base64URLEncode(str) {\n    return str.toString('base64')\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=/g, '');\n}\n\nfunction generateCodeVerifier(){\n    return base64URLEncode(crypto.randomBytes(32));\n }\n \n function generateCodeChallenge(verifier){\n     return base64URLEncode(verifier);\n }\n\n\nexport {isNull, generateCodeVerifier, generateCodeChallenge}","import {useState, useEffect} from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport {isNull} from \"../helper/utils\";\nimport { withRouter } from \"react-router-dom\";\nimport { v4 as uuidv4 } from 'uuid';\n\nconst ImportFromList = (props) => {\n  const [file, setFile] = useState();\n\n  function browseFile (e) {\n    e.preventDefault();\n    setFile(e.target.files[0]);\n  }  \n  function processFile(){\n    const reader = new FileReader();\n    reader.onload = (e) => { \n      const source = e.target.result.split(\"\\n\");\n      let animes = new Map();\n      source.forEach(element => {\n        if(!isNull(element) && element.charCodeAt(0) !== 13){\n          let anime = {\n            id: uuidv4(),\n            sourceTitle: element,\n            malTitle: [],\n            selected: {},\n            import: true\n          }\n          animes.set(anime.id, anime);\n        }\n      });\n      props.populateAnimes(animes);\n      props.history.push(\"Import-MAL\");\n    };\n    reader.readAsText(file);\n  }\n\n  useEffect(() => {\n    if(isNull(props.userToken)){\n      props.history.push(\"/\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.userToken]);\n\n  return (\n    <div className=\"import-list-view\">\n      <div className=\"description\">\n        <h4>Select a text file (.txt) with one title per line.</h4>\n      </div>\n      <div className=\"file-browser\">\n        <input type=\"file\" onChange={(e) => browseFile(e)} />\n      </div>\n      <div className=\"process-button\">\n        <Button disabled={isNull(file)} variant=\"contained\" color=\"default\" onClick={processFile}>Process Animes</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(ImportFromList);","import {isNull} from \"../helper/utils\";\n//import OpenInNewIcon from '@material-ui/icons/OpenInNew';\n\nconst AnimeImportCard = (props) => {\n  \n  return (\n    <div className=\"anime-import-card\">\n      <div className=\"checkbox-import\">\n        <input type=\"checkbox\" disabled={isNull(props.anime.malTitle[0])} checked={props.anime.import} onChange={() => props.handleImportCheckBox(props.anime.id)} />\n      </div>\n      <div className=\"right-content\">\n        <div className=\"source-title\">\n          <span><b>Input title</b>: {props.anime.sourceTitle}&nbsp;</span>\n        </div>\n        <div className=\"mal-title\">\n          {!isNull(props.anime.selected) ?\n            <label>\n              <b>MAL title</b>: \n              <select \n                value={!isNull(props.anime.selected) ? JSON.stringify(props.anime.selected) : \"\"} \n                onChange={(e) => props.handleSelectedChange(props.anime.id, e.target.value)}>\n                  {props.anime.malTitle.map((element) => {\n                    return <option key={element.id} value={JSON.stringify(element)}>\n                        {\"MAL ID \" + element.id + \": \" + element.title}\n                      </option>\n                  })}\n              </select>\n              <div className=\"anime-picture\">\n                <a\n                  href={\"https://myanimelist.net/anime/\" + props.anime.selected.id} \n                  target=\"_blank\" rel=\"noopener noreferrer\">\n                    <img src={props.anime.selected.picture} alt=\"Anime\"/>\n                </a>\n              </div>\n              {/* <a href={\"https://myanimelist.net/anime/\" + props.anime.selected.id} target=\"_blank\" rel=\"noopener noreferrer\"><OpenInNewIcon /></a> */}\n            </label>\n            :\n            <span><b>No title found on MAL</b></span>\n          }\n        </div>\n      </div>\n    </div>    \n  );\n};\n\nexport default AnimeImportCard;","import {isNull} from './utils'\n\nconst MAL_API_KEY = \"194e0811df1955e98ce8c7594b114989\";\nconst MAL_API_SECRET = \"b1d22172346c467dcec1ce6d5dab8fc9c8caad25f26a43279f99771dba0da9f9\";\nconst MAL_DOMAIN_V1 = \"https://myanimelist.net/v1\";\nconst MAL_DOMAIN_V2 = \"https://api.myanimelist.net/v2\";\nconst MAL_AUTHENTICATE = \"/oauth2/authorize\";\nconst MAL_GET_TOKEN = \"/oauth2/token\";\nconst MAL_GET_USER = \"/users/@me\";\nconst MAL_GET_ANIME = \"/anime\";\nconst MAL_PUT_ANIME = \"/anime/\";\nconst MAL_REDIRECT_URI = \"https://shengz94.github.io/MAL-Importer/\";\n//const MAL_REDIRECT_URI = \"http://localhost:3000/\";\n\nfunction authenticationURI(code_challenge){\n    let body = new URLSearchParams();\n    body.append(\"response_type\", \"code\");\n    body.append(\"client_id\", MAL_API_KEY);\n    body.append(\"redirect_uri\", MAL_REDIRECT_URI);\n    body.append(\"code_challenge\", code_challenge);\n    body.append(\"code_challenge_method\", \"plain\");\n\n    return MAL_DOMAIN_V1 + MAL_AUTHENTICATE + \"?\" + body.toString();\n}\nfunction getToken(code, codeVerifier){\n    let body = new URLSearchParams();\n    body.append(\"client_id\", MAL_API_KEY);\n    body.append(\"client_secret\", MAL_API_SECRET);\n    body.append(\"grant_type\", \"authorization_code\");\n    body.append(\"code\", code);\n    body.append(\"redirect_uri\", MAL_REDIRECT_URI);\n    body.append(\"code_verifier\", codeVerifier);\n\n    let endpoint = MAL_DOMAIN_V1 + MAL_GET_TOKEN;// + \"?\" + params.toString();\n\n    let params = {\n        header:{\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: body,\n        method: \"post\"\n    };\n\n    return fetch(endpoint, params).then((response) => {        \n        return response.json();\n    }).then((data) => {\n        var result = {\n            access_token: data.access_token,\n            expireIn: data.expires_in,\n            refreshToken: data.refresh_token\n        };\n\n        return result;\n    });\n};\n\n//https://api.myanimelist.net/v2/users/{user_name} //only @me user is available for now\nfunction getUserInfo(token){\n    let endpoint = MAL_DOMAIN_V2 + MAL_GET_USER;\n\n    let params = {\n        headers:{\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer \" + token\n        },\n        method:\"get\"\n    };\n\n    return fetch(endpoint, params).then((response) => {\n        return response.json();\n    }).then((data) => {\n        var user = {\n            id: data.id,\n            name: data.name,\n            picture: data.picture\n        }\n\n        return user;\n    });\n}\n\n\n//https://api.myanimelist.net/v2/anime\nfunction searchAnime(title, token){\n    let body = new URLSearchParams();\n    body.append(\"q\", title);\n    body.append(\"limit\", 10);\n\n    let endpoint = MAL_DOMAIN_V2 + MAL_GET_ANIME + \"?\" + body.toString();\n\n    let params = {\n        headers:{\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer \" + token\n        },\n        method: \"get\"\n    };\n\n    return fetch(endpoint, params).then((response) => {\n        return response.json();\n    }).then((data) => {\n\n        var result = [];\n\n        data.data.forEach(element => {\n            var current = element.node;\n            var entry = {\n                id: current.id,\n                title: current.title,\n                picture: current.main_picture.medium\n            }\n            result.push(entry);\n        });\n\n        return result;\n    });\n}\n\n//https://api.myanimelist.net/v2/anime/{anime_id}/my_list_status\nfunction addToList(token, anime, status, score){\n    let body = new URLSearchParams();\n    if(!isNull(status)){\n        body.append(\"status\", status);\n    }\n    if(!isNull(score)){\n        body.append(\"score\", score);\n    }\n\n    let endpoint = MAL_DOMAIN_V2 + MAL_PUT_ANIME + anime + \"/my_list_status\";\n\n    let params = {\n        headers:{\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n            \"Authorization\": \"Bearer \" + token\n        },\n        body: body,\n        method: \"put\"\n    };\n\n    return fetch(endpoint, params).then((response) => {\n        return response.json();\n    }).then((data) => {\n        var result = isNull(data.status);\n        return result;\n    });\n}\n\nexport {authenticationURI, getToken, getUserInfo, searchAnime, addToList}","import { Fragment, useEffect, useState } from \"react\";\nimport { Button } from \"@material-ui/core\"\nimport { withRouter } from \"react-router-dom\";\nimport Loader from \"react-loader-spinner\";\nimport AnimeImportCard from \"./AnimeImportCard\";\nimport {isNull} from \"../helper/utils\";\nimport {addToList, searchAnime} from \"../helper/malAPI\"\n\nconst ImportToMAL = (props) => {\n  const [ready, setReady] = useState(false);\n  const [animeArray, setAnimeArray] = useState();\n  const [loading, setLoading] = useState(false);\n  const [status, setStatus] = useState(\"completed\")\n  const STATUS = [\n    \"completed\",\n    \"watching\",\n    \"on_hold\",\n    \"dropped\",\n    \"plan_to_watch\"\n  ]\n\n  useEffect(() => {\n    setLoading(true);\n    populateMALTitle();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    setAnimeArray([...props.animes.values()])\n  }, [props.animes]);\n\n  useEffect(() => {\n    if(!isNull(animeArray) && animeArray.length >= 0){\n      setReady(true);\n    }\n  }, [animeArray]);\n\n  useEffect(() => {\n    if(isNull(props.userToken)){\n      props.history.push(\"/\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.userToken]);\n\n  async function populateMALTitle(){\n    let requests = [];\n\n    props.animes.forEach(element => {\n      let tempElement = element;\n      requests.push(searchAnime(tempElement.sourceTitle, props.userToken));\n    });\n    await Promise.allSettled(requests).then(data =>{\n      props.updateAnimes(data);\n    });\n    setLoading(false);\n  }\n\n  async function importAnimes(){\n    if(!isNull(props.animes)){\n      let requests = [];\n      let tempAnimes = [];\n      let results;\n\n      setLoading(true);\n      for(const element of props.animes.values()){\n        if(element.import && !isNull(element.selected) && !isNull(element.selected.id)){ \n          tempAnimes.push(element.selected.id);\n          requests.push(addToList(props.userToken, element.selected.id, status));\n        }\n      }\n      await Promise.allSettled(requests).then((result) => {\n        if(!isNull(result)){\n          results = {\n            animes: tempAnimes,\n            result: result\n          }\n        }\n      });\n      setLoading(false);\n      props.fillLog(results);\n      props.history.push(\"/Result\");\n    }\n  }\n\n  if(isNull(props.animes) || props.animes.size <= 0){\n    props.history.push(\"/Home\");\n  }\n\n  return (\n    <div className=\"import-mal-view\">\n      {loading ?\n        <div className=\"loading-screen\">\n          <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={100} width={100}/>\n        </div>\n        :\n        <Fragment></Fragment>\n      }\n      {ready  && !isNull(props.animes)?\n        <Fragment>\n          <div className=\"anime-list\">\n          <div className=\"status-select\">\n            <select value={status} onChange={(e) => setStatus(e.target.value)}>\n              {STATUS.map((status, idx) => {\n                return <option key={idx} value={status}>\n                    {status.replaceAll(\"_\", \" \")}\n                  </option>\n              })}\n            </select>\n          </div>\n            {animeArray.map(anime =>  \n              <AnimeImportCard key={anime.id} \n              anime={anime} updateAnime={props.updateAnime} \n                handleImportCheckBox={props.handleImportCheckBox} \n                handleSelectedChange={props.handleSelectedChange}\n              />\n              )\n            }\n          </div>\n          <div className=\"import-button\">\n            <Button variant=\"contained\" color=\"default\" onClick={importAnimes}>Import Animes</Button>\n          </div>\n        </Fragment>\n        :\n        <Fragment/>\n      }   \n    </div>\n  );\n};\n\nexport default withRouter(ImportToMAL);","import {authenticationURI} from \"../helper/malAPI\";\nimport {isNull, generateCodeVerifier, generateCodeChallenge} from \"../helper/utils\";\nimport { Button } from \"@material-ui/core\";\nimport { withRouter} from \"react-router-dom\";\n\nconst Login = (props) => {\n\n    function goToAutheticationPage(){\n        let codeVerifier = generateCodeVerifier();\n        let codeChallenge = generateCodeChallenge(codeVerifier);\n        localStorage.setItem(\"codeVerifier\", codeVerifier);\n        window.location.href = authenticationURI(codeChallenge);\n    }\n\n    if(!isNull(props.userToken)){\n        props.history.push(\"/Home\");\n    }\n\n    return (\n        <div className=\"login-view\">\n            <Button size=\"large\" variant=\"contained\" onClick={goToAutheticationPage}>Log in</Button>\n        </div>\n    );\n};\n\nexport default withRouter(Login);","import {Fragment, useEffect}  from \"react\";\nimport { Button } from \"@material-ui/core\"\nimport { withRouter } from \"react-router-dom\";\nimport {isNull} from \"../helper/utils\";\n\nconst Result = (props) => {\n\n  useEffect(() => {\n    if(isNull(props.userToken)){\n      props.history.push(\"/\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.userToken]);\n\n  function renderLog(line){\n    if(line.indexOf(\"///end///\") > 0){\n      const linkAr = line.split(\"///end///\");\n      const link = linkAr[1];\n      const textAr = linkAr[0].split(\"///startTitle///\");\n      const text = textAr[0]\n      const linkText = textAr[1];\n      return <p>{text} <a href={link}>{linkText}</a> </p>\n    }\n    return <p>{line}</p>;\n  }\n\n  function backToHome(){\n    props.history.push(\"/Home\");\n  }\n\n  return (\n    <div className=\"result-view\">\n      <div className=\"log\">\n        {props.log.map(line => <Fragment key={Math.random()}>{renderLog(line)}</Fragment>)}\n      </div>\n      <div className=\"back-button\">\n        <Button variant=\"contained\" color=\"default\" onClick={backToHome}>Back</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Result);","export default __webpack_public_path__ + \"static/media/mal_logo.5f586ff1.png\";","import React, {Fragment}  from \"react\";\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport {isNull} from \"../helper/utils\";\nimport mal_logo from \"../resources/mal_logo.png\"\nimport github_logo from \"../resources/github_logo.png\"\n\nconst TopBar = (props) => {\n\n  return (\n    <div className=\"top-bar\">\n        <div className=\"user-info\">\n            <div className=\"left-content\"> \n                <div className=\"logo\">\n                    <a href=\"https://myanimelist.net/\"><img id=\"mal\" src={mal_logo} alt=\"MAL\"/></a>\n                </div>\n                <div className=\"app-title\">\n                    <p>MyAnimeList Importer</p>\n                </div>\n                <div className=\"logo\">\n                    <a href=\"https://github.com/Shengz94\"><img id=\"github\" src={github_logo} alt=\"GitHub\"/></a>\n                </div>\n            </div>\n            {isNull(props.user) ?\n                <Fragment></Fragment>\n                :\n                <div className=\"right-content\"> \n                    <div className=\"logout\">\n                        <ExitToAppIcon size=\"small\" onClick={props.logout}/>\n                    </div>\n                    <div className=\"user-avatar\">\n                        <a href={\"https://myanimelist.net/profile/\" + props.user.name}>\n                            <img src={props.user.picture} alt=\"Avatar\"/>\n                        </a>\n                    </div>\n                    <div className=\"user-name\">\n                        <a href={\"https://myanimelist.net/profile/\" + props.user.name}>\n                        <span>{props.user.name}</span>\n                        </a>\n                    </div>\n                </div>\n            }\n        </div>\n    </div>\n  );\n};\n\nexport default TopBar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwQTM4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwQTI4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMyOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJBNDE0QUJDOTlBMTExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8kSqyAAADD5JREFUeNrsXQ2Q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\"","import React, {Fragment, useEffect, useState}  from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport ImportFromList from \"./ImportFromList\";\nimport ImportToMAL from \"./ImportToMAL\";\nimport Login from \"./Login\";\nimport Result from \"./Result\";\nimport {getToken, getUserInfo} from \"../helper/malAPI\";\nimport {isNull} from \"../helper/utils\";\nimport TopBar from \"./TopBar\";\n\nconst Gateway = () => {\n  const [animes, setAnimes] = useState(new Map());\n  const [log, setLog] = useState([]);\n  const [user, setUser] = useState();\n  const [userToken, setUserToken] = useState(localStorage.getItem(\"userToken\"));\n  useEffect(() => {\n    localStorage.setItem(\"userToken\", userToken);\n    if(!isNull(userToken)){\n      getUserInfo(userToken).then((data) => {\n        setUser(data);\n      });\n    }\n  }, [userToken]);\n\n  useEffect(() => {\n    if(isNull(userToken)){\n      let params = new URLSearchParams(window.location.search);\n      let code = params.get(\"code\");\n      if(!isNull(code)){\n        let codeVerifier = localStorage.getItem(\"codeVerifier\");\n        getToken(code, codeVerifier).then((data) => {\n          setUserToken(data.access_token);\n        });\n      }\n    }\n    else{\n      getUserInfo(userToken).then((data) => {\n        setUser(data);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function logout(){\n    //revokeToken(userToken); Not available at MAL API yet\n    setUserToken(undefined);\n    setUser(undefined);\n  }\n\n  function populateAnimes(input){\n    setAnimes(input);\n  }\n\n  function updateAnime(id, newAnime){\n    let tempAnimes = new Map(animes);\n    tempAnimes.set(id, newAnime);\n    setAnimes(tempAnimes);\n  }\n\n  function updateAnimes(data){\n    let tempAnimes = new Map(animes);\n    let idx = 0;\n    tempAnimes.forEach(element => {\n      element.malTitle = data[idx].value;\n      element.selected = data[idx].value[0];\n      if(isNull(data[idx].value[0])){\n        element.import = false;\n      }\n      idx++;\n    });\n    setAnimes(tempAnimes)\n  }\n\n  function handleSelectedChange(id, anime){\n    let tempAnime = animes.get(id);\n    tempAnime.selected = JSON.parse(anime);\n    updateAnime(id, tempAnime);\n  }\n\n  function handleImportCheckBox(id){\n    let tempAnime = animes.get(id);\n    tempAnime.import = !tempAnime.import;\n    updateAnime(id, tempAnime);\n  }\n\n  function fillLog(results){\n    let importedSet = new Set(results.animes);\n    let tempLog = [];\n    animes.forEach( anime => {\n      let result = \"-\";\n      if(anime.import){\n        if(!isNull(anime.selected)){\n          if(!isNull(results) && (importedSet.has(anime.selected.id))){\n              result = anime.sourceTitle + \" imported to MAL as ///startTitle///\" \n                + anime.selected.title + \" (ID:\" + anime.selected.id \n                + \"). ///end///https://myanimelist.net/anime/\" + anime.selected.id;\n          }\n          else{\n            result = \"There were a problem importing \" + anime.sourceTitle + \" to MAL. \";\n          }\n        }\n        else{\n          result = anime.sourceTitle + \" NOT found in MAL. \"; \n        }\n      }\n      else{\n        result = anime.sourceTitle + \" NOT imported to MAL. \"\n      }\n      tempLog.push(result);\n    });\n    setLog(tempLog);\n  }\n\n  return (\n    <Fragment>\n      <TopBar user={user} logout={logout}/> \n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route exact path=\"/\"> \n            <Login userToken={userToken}/>\n          </Route>\n          <Route exact path=\"/Home\">\n            <ImportFromList userToken={userToken} populateAnimes={(input) => populateAnimes(input)}/>\n          </Route>\n          <Route exact path=\"/Import-MAL\" render={() => (\n            <ImportToMAL animes={animes} userToken={userToken} log={log}\n              updateAnimes={updateAnimes} fillLog={fillLog}\n              handleSelectedChange={handleSelectedChange}\n              handleImportCheckBox={handleImportCheckBox}\n            />\n          )}/>\n          <Route exact path=\"/Result\" render={() => (\n            <Result userToken={userToken} log={log} />\n          )}/>\n        </Switch>\n      </BrowserRouter>\n    </Fragment>\n  );\n};\n\nexport default Gateway;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Gateway from './components/Gateway';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Gateway />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}